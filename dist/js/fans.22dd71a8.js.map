{"version":3,"sources":["webpack:///./src/views/fans/index.vue?b340","webpack:///./src/views/fans/index.vue?f2bd","webpack:///src/views/fans/index.vue","webpack:///./src/views/fans/index.vue?d814","webpack:///./src/views/fans/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","model","value","callback","$$v","activeName","expression","_l","item","key","id","toString","photo","_s","name","total","reqParams","per_page","page","on","changePage","ref","staticStyle","staticRenderFns","console","log","res","data","option","xAxis","xAxisData","series","seriesData","myChart","setOption","component"],"mappings":"+HAAA,yBAA2jB,EAAG,G,yCCA9jB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,UAAU,CAACA,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,WAAW,CAACJ,EAAIS,GAAG,WAAW,GAAGL,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,QAAQG,MAAM,CAACC,MAAOX,EAAc,WAAEY,SAAS,SAAUC,GAAMb,EAAIc,WAAWD,GAAKE,WAAW,eAAe,CAACX,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACH,EAAG,MAAM,CAACE,YAAY,aAAaN,EAAIgB,GAAIhB,EAAQ,MAAE,SAASiB,GAAM,OAAOb,EAAG,MAAM,CAACc,IAAID,EAAKE,GAAGC,WAAWd,YAAY,aAAa,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,GAAG,IAAMU,EAAKI,SAASjB,EAAG,IAAI,CAACJ,EAAIS,GAAGT,EAAIsB,GAAGL,EAAKM,SAASnB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAU,MAAQ,KAAK,CAACP,EAAIS,GAAG,WAAW,MAAK,GAAGL,EAAG,gBAAgB,CAACG,MAAM,CAAC,WAAa,GAAG,OAAS,oBAAoB,MAAQP,EAAIwB,MAAM,YAAYxB,EAAIyB,UAAUC,SAAS,eAAe1B,EAAIyB,UAAUE,MAAMC,GAAG,CAAC,iBAAiB5B,EAAI6B,eAAe,GAAGzB,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,cAAc,CAACH,EAAG,MAAM,CAAC0B,IAAI,MAAMC,YAAY,CAAC,MAAQ,QAAQ,OAAS,cAAc,IAAI,IAAI,IACxjCC,EAAkB,G,6CCyCtB,GACE,KAAF,YACE,KAFF,WAGI,MAAJ,CAEM,WAAN,YAEM,UAAN,CACQ,KAAR,EACQ,SAAR,IAGM,KAAN,GAEM,MAAN,IAIE,QAlBF,WAmBI,KAAJ,WAEE,QArBF,WAuBI,KAAJ,WAEE,QAAF,CAEI,QAFJ,WAEM,IAAN,OAAM,OAAN,qDAAQ,IAAR,IAAQ,OAAR,0FACA,8CADA,gBACA,EADA,EACA,UACA,sBACA,iBAHA,8CAMI,WARJ,SAQA,GACM,KAAN,iBACM,KAAN,WAGI,QAbJ,WAaM,IAAN,OAAM,OAAN,qDAAQ,IAAR,cAAQ,OAAR,0FAIgB,EAAhB,sBAEgB,EAAhB,CACkB,MAAlB,YACkB,QAAlB,CACoB,QAApB,OAEoB,YAApB,CAEsB,KAAtB,WAGkB,KAAlB,CACoB,KAApB,KACoB,MAApB,KACoB,OAApB,KACoB,cAApB,GAEkB,MAAlB,CACA,CACoB,KAApB,WACoB,KAApB,GACoB,SAApB,CACsB,gBAAtB,KAIkB,MAAlB,CACA,CACoB,KAApB,UAGkB,OAAlB,CACA,CACoB,KAApB,OACoB,KAApB,MACoB,SAApB,MAEoB,KAApB,MA1CA,SA+CA,oCA/CA,OAoDgB,IAAhB,KALgB,EA/ChB,OAgDgBC,QAAQC,IAAIC,EAAIC,KAAKA,MACrB,EAAhB,gBACgB,EAAhB,GACgB,EAAhB,GACA,EACkB,EAAlB,QACkB,EAAlB,WAEgBC,EAAOC,MAAM,GAAGF,KAAOG,EACvBF,EAAOG,OAAO,GAAGJ,KAAOK,EAGxBC,EAAQC,UAAUN,GA5DlC,qDA8DgB,EAAhB,6BA9DA,+DChF8V,I,wBCQ1VO,EAAY,eACd,EACA7C,EACAiC,GACA,EACA,KACA,WACA,MAIa,aAAAY,E","file":"js/fans.22dd71a8.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=ccc3d3dc&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=ccc3d3dc&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fans\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('my-bread',[_vm._v(\"粉丝管理\")])],1),_c('el-tabs',{attrs:{\"type\":\"card\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"粉丝列表\",\"name\":\"fansList\"}},[_c('div',{staticClass:\"fans-list\"},_vm._l((_vm.fans),function(item){return _c('div',{key:item.id.toString(),staticClass:\"list-item\"},[_c('el-avatar',{attrs:{\"size\":80,\"src\":item.photo}}),_c('p',[_vm._v(_vm._s(item.name))]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"}},[_vm._v(\"+ 关注\")])],1)}),0),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.total,\"page-size\":_vm.reqParams.per_page,\"current-page\":_vm.reqParams.page},on:{\"current-change\":_vm.changePage}})],1),_c('el-tab-pane',{attrs:{\"label\":\"粉丝画像\",\"name\":\"fansImage\"}},[_c('div',{ref:\"bar\",staticStyle:{\"width\":\"600px\",\"height\":\"400px\"}})])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container-fans\">\r\n        <el-card>\r\n            <div slot=\"header\">\r\n                <my-bread>粉丝管理</my-bread>\r\n            </div>\r\n            <!-- tabs标签页 -->\r\n            <el-tabs v-model=\"activeName\" type=\"card\" >\r\n                <el-tab-pane label=\"粉丝列表\" name=\"fansList\">\r\n                    <!-- 列表 -->\r\n                    <div class=\"fans-list\">\r\n                        <!-- key必须使用字符串或者数字，目前是对象（json-bigint转化的）\r\n                        解决：转成字符串 -->\r\n                        <div class=\"list-item\" v-for=\"item in fans\" :key=\"item.id.toString()\">\r\n                            <el-avatar :size=\"80\" :src=\"item.photo\"></el-avatar>\r\n                            <p>{{item.name}}</p>\r\n                            <el-button type=\"primary\" plain>+ 关注</el-button>\r\n                        </div>\r\n                    </div>\r\n                    <!-- 分页 -->\r\n                    <el-pagination\r\n                        background\r\n                        layout=\"prev, pager, next\"\r\n                        :total=\"total\"\r\n                        :page-size=\"reqParams.per_page\"\r\n                        :current-page=\"reqParams.page\"\r\n                        @current-change=\"changePage\">\r\n                    </el-pagination>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"粉丝画像\" name=\"fansImage\">\r\n                    <div ref=\"bar\" style=\"width:600px;height:400px\">\r\n\r\n                    </div>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 导入echarts\r\nimport echarts from 'echarts'\r\nexport default {\r\n    name:'page-fans',\r\n    data() {\r\n        return {\r\n            // 默认激活选项卡\r\n            activeName:\"fansImage\",\r\n            // 请求参数\r\n            reqParams:{\r\n                page:1,\r\n                per_page:24\r\n            },\r\n            // 粉丝列表\r\n            fans:[],\r\n            // 总条数\r\n            total:0\r\n\r\n        }\r\n    },\r\n    created() {\r\n        this.getFans()\r\n    },\r\n    mounted(){\r\n        // 初始化柱状图,不能created中，因为要获取dom，created中是undif\r\n        this.initBar()\r\n    },\r\n    methods:{\r\n        // 获取粉丝列表\r\n        async getFans() {\r\n            const {data:{data}} = await this.$http.get('followers',{params:this.reqParams})\r\n            this.total = data.total_count\r\n            this.fans = data.results\r\n        },\r\n        // 切换页码\r\n        changePage(newPage) {\r\n            this.reqParams.page = newPage\r\n            this.getFans()\r\n        },\r\n        // 初始化柱状图\r\n        async initBar() {\r\n            // 异常\r\n            try {\r\n                // 初始化echarts\r\n                const myChart =  echarts.init(this.$refs.bar)\r\n                // 定义图表配置\r\n                const option = {\r\n                    color: ['#3398DB'],\r\n                    tooltip: {\r\n                        trigger: 'axis',\r\n                        // 坐标轴指示器，坐标轴触发有效\r\n                        axisPointer: {   \r\n                            // 默认为直线，可选为：'line' | 'shadow'        \r\n                            type: 'shadow'        \r\n                        }\r\n                    },\r\n                    grid: {\r\n                        left: '3%',\r\n                        right: '4%',\r\n                        bottom: '3%',\r\n                        containLabel: true\r\n                    },\r\n                    xAxis: [\r\n                        {\r\n                            type: 'category',\r\n                            data: [],\r\n                            axisTick: {\r\n                                alignWithLabel: true\r\n                            }\r\n                        }\r\n                    ],\r\n                    yAxis: [\r\n                        {\r\n                            type: 'value'\r\n                        }\r\n                    ],\r\n                    series: [\r\n                        {\r\n                            name: '直接访问',\r\n                            type: 'bar',\r\n                            barWidth: '60%',\r\n                            // 刻度对应的数据\r\n                            data: []\r\n                        }\r\n                    ]\r\n                }\r\n                // 获取数据，给options数据赋值\r\n                const res = await this.$http.get('statistics/followers')\r\n                console.log(res.data.data);\r\n                const obj = res.data.data.age\r\n                const xAxisData = []\r\n                const seriesData = []\r\n                for(const key in obj ) {\r\n                    xAxisData.push(key)\r\n                    seriesData.push(obj[key])\r\n                }\r\n                option.xAxis[0].data = xAxisData\r\n                option.series[0].data = seriesData\r\n\r\n                // 使用这个配置\r\n                myChart.setOption(option)\r\n            } catch (error) {\r\n                this.$message.error('网络异常，请刷新重试')\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.fans-list {\r\n    .list-item{\r\n        width: 100px;\r\n        height: 170px;\r\n        border: 1px dashed #ddd;\r\n        display: inline-block;\r\n        margin-right: 40px;\r\n        margin-top: 20px;\r\n        text-align: center;\r\n        padding-top: 10px;\r\n        p{\r\n            margin: 10px;\r\n            font-size: 14px;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ccc3d3dc&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ccc3d3dc&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccc3d3dc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}